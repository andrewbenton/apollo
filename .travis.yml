language: vala

compiler:
    - valac
    - gcc

before_script:
    - mkdir build
    - cd build
    - cmake ..
    - make

before_install:
    - wget https://download.gnome.org/sources/vala/0.30/vala-0.30.0.tar.xz
    - tar xf vala-0.30.0.tar.gz
    - cd vala-0.30.0
    - ./configure
    - sudo make && sudo make install
    - sudo apt-get install libgee-0.8 libgee-0.8-dev libjson-glib-1.0-0 libjson-glib-1.0-common

install: glib-2.0 gio-2.0 json-glib-1.0 valac libgee make get-deps

script: make test
